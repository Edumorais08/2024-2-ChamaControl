import{j as e,P as o,r as l,a as E,L as _}from"./index-CVdm0UYD.js";import{N as P,R as v}from"./Rodape-vz7nSTM5.js";const L="_content_1qu68_1",C="_date_1qu68_5",y="_img_1qu68_9",I="_card_1qu68_13",M="_title_1qu68_25",$="_info_1qu68_46",n={content:L,date:C,img:y,card:I,title:M,info:$},j=a=>{const t=a.publishedAt,r=t[8]+t[9]+"/"+t[5]+t[6]+"/"+t[0]+t[1]+t[2]+t[3];return e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:n.card,children:[e.jsx("p",{className:n.title,children:a.title}),e.jsx("div",{className:"news-poster",children:e.jsx("img",{className:n.img,src:a.image,alt:"imagem da notícia"})}),e.jsxs("div",{className:n.cardContent,children:[e.jsxs("p",{className:n.content,children:["Conteúdo: ",a.content]}),e.jsxs("div",{className:n.info,children:[e.jsxs("p",{className:n.name,children:["Fonte: ",a.name]}),e.jsxs("p",{className:n.date,children:["Lançamento: ",r]})]})]})]})};j.propTypes={title:o.string.isRequired,name:o.string,content:o.string.isRequired,publishedAt:o.string,image:o.string,url:o.string.isRequired,id:o.number.isRequired};const F=()=>{const a="f56263418e43365eafa5dd824d8d957e",[r,w]=l.useState([]),[d,g]=l.useState(!1),[R,b]=l.useState(!0),[N,A]=l.useState(null),[O,q]=l.useState(new Set),[u,x]=l.useState(null);l.useEffect(()=>{f()},[]);async function f(){if(!(d||r.length>=50)){g(!0),x(null);try{let s=N?`&to=${N}`:"";const m=(await E.get(`https://gnews.io/api/v4/search?q=queimadas AND (Amazônia OR floresta OR cerrado OR Pantanal OR Norte OR Sul OR Sudeste OR Nordeste OR Caatinga OR Pampa OR "Mata Atlântica" OR "Centro-Oeste" OR Brasil) NOT ("LA" OR "Los Angeles")&country=br&max=10${s}&token=${a}`)).data.articles;(m.length===0||r.length+m.length>=50)&&b(!1);const i=m.filter(c=>!O.has(c.url));i.length>0&&(w(c=>[...c,...i].slice(0,50)),q(c=>{const h=new Set(c);return i.forEach(S=>h.add(S.url)),h}),A(i[i.length-1].publishedAt))}catch(s){console.error("Erro ao buscar notícias:",s),x("Ocorreu um problema ao buscar as notícias. Por favor, tente novamente mais tarde.")}g(!1)}}return e.jsxs("div",{className:"control-panel",children:[e.jsx(P,{}),e.jsxs("section",{id:"news",children:[e.jsx("h1",{className:"news-title",children:"Notícias"}),u&&e.jsx("p",{className:"error-message",children:u}),d&&r.length===0?e.jsx(_,{}):e.jsx("ul",{className:"news-list",children:r.map((s,p)=>e.jsx(j,{id:s.source.id,title:s.title,name:s.source.name,content:s.content,publishedAt:s.publishedAt,image:s.image,url:s.url,movie:s},p))}),R&&!d&&!u&&e.jsx("button",{onClick:f,className:"load-more-btn",children:"Carregar Mais"}),d&&r.length>0&&e.jsx(_,{})]}),e.jsx(v,{})]})};export{F as default};
