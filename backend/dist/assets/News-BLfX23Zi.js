import{j as e,P as r,r as i,a as S,L as f}from"./index-CC9hpHrh.js";import{N as R,R as E}from"./Rodape-CSTwlsmm.js";const L="_content_1qu68_1",y="_date_1qu68_5",C="_img_1qu68_9",P="_card_1qu68_13",I="_title_1qu68_25",M="_info_1qu68_46",a={content:L,date:y,img:C,card:P,title:I,info:M},p=s=>{const n=s.publishedAt,o=n[8]+n[9]+"/"+n[5]+n[6]+"/"+n[0]+n[1]+n[2]+n[3];return e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:a.card,children:[e.jsx("p",{className:a.title,children:s.title}),e.jsx("div",{className:"news-poster",children:e.jsx("img",{className:a.img,src:s.image,alt:"imagem da notícia"})}),e.jsxs("div",{className:a.cardContent,children:[e.jsxs("p",{className:a.content,children:["Conteúdo: ",s.content]}),e.jsxs("div",{className:a.info,children:[e.jsxs("p",{className:a.name,children:["Fonte: ",s.name]}),e.jsxs("p",{className:a.date,children:["Lançamento: ",o]})]})]})]})};p.propTypes={title:r.string.isRequired,name:r.string,content:r.string.isRequired,publishedAt:r.string,image:r.string,url:r.string.isRequired,id:r.number.isRequired};const T=()=>{const[s,n]=i.useState([]),[o,h]=i.useState(!1),[_,w]=i.useState(!0),[g,b]=i.useState(null),[q,A]=i.useState(new Set),[d,N]=i.useState(null);i.useEffect(()=>{x()},[]);async function x(){if(!(o||s.length>=50)){h(!0),N(null);try{let t=g?`&to=${g}`:"";const u=(await S.get("/api/noticias")).data.articles;(u.length===0||s.length+u.length>=50)&&w(!1);const l=u.filter(c=>!q.has(c.url));l.length>0&&(n(c=>[...c,...l].slice(0,50)),A(c=>{const m=new Set(c);return l.forEach(v=>m.add(v.url)),m}),b(l[l.length-1].publishedAt))}catch(t){console.error("Erro ao buscar notícias:",t),N("Ocorreu um problema ao buscar as notícias. Por favor, tente novamente mais tarde.")}h(!1)}}return e.jsxs("div",{className:"control-panel",children:[e.jsx(R,{}),e.jsxs("section",{id:"news",children:[e.jsx("h1",{className:"news-title",children:"Notícias"}),d&&e.jsx("p",{className:"error-message",children:d}),o&&s.length===0?e.jsx(f,{}):e.jsx("ul",{className:"news-list",children:s.map((t,j)=>e.jsx(p,{id:t.source.id,title:t.title,name:t.source.name,content:t.content,publishedAt:t.publishedAt,image:t.image,url:t.url,movie:t},j))}),_&&!o&&!d&&e.jsx("button",{onClick:x,className:"load-more-btn",children:"Carregar Mais"}),o&&s.length>0&&e.jsx(f,{})]}),e.jsx(E,{})]})};export{T as default};
