import{j as e,P as r,r as o,a as S,L as p}from"./index-C_fzVjVx.js";import{N as R,R as E}from"./Rodape-DFaAOe7s.js";const L="_content_1qu68_1",y="_date_1qu68_5",C="_img_1qu68_9",P="_card_1qu68_13",I="_title_1qu68_25",M="_info_1qu68_46",n={content:L,date:y,img:C,card:P,title:I,info:M},f=s=>{const a=s.publishedAt,i=a[8]+a[9]+"/"+a[5]+a[6]+"/"+a[0]+a[1]+a[2]+a[3];return e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:n.card,children:[e.jsx("p",{className:n.title,children:s.title}),e.jsx("div",{className:"news-poster",children:e.jsx("img",{className:n.img,src:s.image,alt:"imagem da notícia"})}),e.jsxs("div",{className:n.cardContent,children:[e.jsxs("p",{className:n.content,children:["Conteúdo: ",s.content]}),e.jsxs("div",{className:n.info,children:[e.jsxs("p",{className:n.name,children:["Fonte: ",s.name]}),e.jsxs("p",{className:n.date,children:["Lançamento: ",i]})]})]})]})};f.propTypes={title:r.string.isRequired,name:r.string,content:r.string.isRequired,publishedAt:r.string,image:r.string,url:r.string.isRequired,id:r.number.isRequired};const T=()=>{const[s,a]=o.useState([]),[i,g]=o.useState(!1),[_,w]=o.useState(!0),[d,b]=o.useState(null),[q,A]=o.useState(new Set),[u,N]=o.useState(null);o.useEffect(()=>{x()},[]);async function x(){if(!(i||s.length>=50)){g(!0),N(null);try{let t=d?`&to=${d}`:"";const m=(await S.get("/api/noticias",{params:{to:d}})).data.articles;(m.length===0||s.length+m.length>=50)&&w(!1);const l=m.filter(c=>!q.has(c.url));l.length>0&&(a(c=>[...c,...l].slice(0,50)),A(c=>{const h=new Set(c);return l.forEach(v=>h.add(v.url)),h}),b(l[l.length-1].publishedAt))}catch(t){console.error("Erro ao buscar notícias:",t),N("Ocorreu um problema ao buscar as notícias. Por favor, tente novamente mais tarde.")}g(!1)}}return e.jsxs("div",{className:"control-panel",children:[e.jsx(R,{}),e.jsxs("section",{id:"news",children:[e.jsx("h1",{className:"news-title",children:"Notícias"}),u&&e.jsx("p",{className:"error-message",children:u}),i&&s.length===0?e.jsx(p,{}):e.jsx("ul",{className:"news-list",children:s.map((t,j)=>e.jsx(f,{id:t.source.id,title:t.title,name:t.source.name,content:t.content,publishedAt:t.publishedAt,image:t.image,url:t.url,movie:t},j))}),_&&!i&&!u&&e.jsx("button",{onClick:x,className:"load-more-btn",children:"Carregar Mais"}),i&&s.length>0&&e.jsx(p,{})]}),e.jsx(E,{})]})};export{T as default};
